<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Главная страница на DevExtreme</title>
    <link rel="stylesheet" href="lib/devextreme/dist/css/dx.light.css" />
    <link rel="stylesheet" href="lib/devextreme/dist/css/dx.common.css" />
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/devextreme/dist/js/dx.all.js"></script>
</head>
<body class="dx-viewport">
    <div class="demo-container">
        <div id="gridContainer">

        </div>
    </div>
    <script>
        $(function () {
            function isNotEmpty(value) {
                return value !== undefined && value !== null && value !== "";
            }

            var store = new DevExpress.data.CustomStore({
                key: ["id", "value", "number"],
                load: function (loadOptions) {
                    var deferred = $.Deferred(),
                    args = {};
                    [
                        "skip",
                        "take",
                        "requireTotalCount",
                        "requireGroupCount",
                        "sort",
                        "filter",
                        "totalSummary",
                        "group",
                        "groupSummary"
                    ].forEach(function (i) {
                        if (i in loadOptions && isNotEmpty(loadOptions[i]))
                        args[i] = JSON.stringify(loadOptions[i]);
                    });
                    $.ajax({
                        url: "/Home/IndexDevExtreme",
                        dataType: "json",
                        data: args,
                        success: function (result) {
                            deferred.resolve(result.data, {
                                totalCount: result.totalCount,
                                summary: result.summary,
                                groupCount: result.groupCount
                            });
                        },
                        error: function () {
                            deferred.reject("Data Loading Error");
                        },
                        timeout: 5000
                    });
                    return deferred.promise();
                }
            });
            $("#gridContainer").dxDataGrid({
                dataSource: store,
                showBorders: true,
                remoteOperations: true,
                paging: {
                    pageSize: 12
                },
                pager: {
                    showPageSizeSelector: true,
                    allowedPageSizes: [8, 12, 20]
                },
                columns: [
                    {
                        dataField: "id",
                        dataType: "number"
                    },
                    {
                        dataField: "number",
                        dataType: "number"
                    },
                    {
                        dataField: "value",
                        dataType: "number"
                    },
                ],                   
            }).dxDataGrid("instance");;
        });
        
    </script>
</body>
</html>